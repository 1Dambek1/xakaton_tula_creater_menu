{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
  <!-- Заголовок страницы в браузере -->
  <title>Завтраки</title>
  <!--- SWIPER --->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css?_v=20230922183920"
  />
  <!-- TAILWINDCSS -->
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.0.2/tailwind.min.css?_v=20231022062914"
    rel="stylesheet"
  />
  <!-- BOOTSTRAP -->
  <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css?_v=20230922183920" rel="stylesheet" -->
  <!-- integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous"> -->
  <!-- Подключаем CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/simplebar@latest/dist/simplebar.css?_v=20230922183920"
  />

  <link rel="stylesheet" href="{% static 'mainapp/css/style.min.css' %}" />
  <!-- Кодировка страницы -->
  <!-- С появлением HTML5 можно использовать  -->
  <meta charset="UTF-8" />
  <!-- Настройки адаптивности страницы  -->
  <!-- Адаптивность  -->
  <meta
    name="viewport"
    content="width=device-width,initial-scale=1.0,maximum-scale=1.0, user-scalable=0"
  />
  <!---maximum-scale=1.0, user-scalable=0--->
  <!-- Отключает формирование ссылки у номера телефона на iOS -->
  <!---<meta name="format-detection" content="telephone=no">--->
  <link rel="shortcut icon" href="" />
  <!-- Краткое описание страницы  -->
  <meta name="description" content="" />
  <!-- Ключевые слова страницы  -->
  <meta name="keywords" content="" />

  <!-- Управление доступом поисковых роботов к странице -->
  <!-- Запрет индексации страницы полностью -->
  <!---<meta name="robots" content="none">--->

  <!-- Автор страницы -->
  <meta name="Author" content="" />
  <!-- Авторские права -->
  <meta name="Copyright" content="2023" />
  <!-- Адрес автора -->
  <meta name="Address" content="" />

  <!-- локализация сайта, для русскоязычного сайта ru_RU -->
  <meta property="og:locale" content="ru_RU" />
  <!-- тип контента, по умолчанию используется article -->
  <meta property="og:type" content="article" />
  <!-- заголовок страницы, который будет выводится в записи социальной сети -->
  <meta property="og:title" content="" />
  <!-- описание страницы -->
  <meta property="og:description" content="" />
  <!-- ссылка на изображение, которое будет публиковаться в записи -->
  <meta property="og:image" content="" />
  <!-- ссылка на текущую страницу -->
  <meta property="og:url" content="" />
  <!-- название сайта -->
  <meta property="og:site_name" content="" />

  <!-- Тип карты, по умолчанию используется summary -->
  <meta name="twitter:card" content="summary" />
  <!-- Имя/логин автора -->
  <meta name="twitter:site" content="" />
  <!-- Название страницы -->
  <meta name="twitter:title" content="" />
  <!-- Описание страницы -->
  <meta name="twitter:description" content="" />
  <!-- Cсылка на изображение -->
  <meta name="twitter:image" content="" />
</head>


  <body class="overflow-auto">
    <div class="wrapper">
      <header class="header">
  <div class="header__container _container">
    <div class="header__body">
      <a href="#" class="header__logo">dmshms</a>
      <div class="header__content">
        <div data-da=".aside__body,767,1" class="header__search search">
          <form action="#" method="get" class="search__form">
            <div class="search__body">
              <div class="search__item _toggled-input input-underline">
                <label class="label"> Найти рецепт.. </label
                ><input name="search" type="text" class="search__input" />
              </div>
              <button
                type="submit"
                class="search__button _icon-search"
              ></button>
            </div>
          </form>
        </div>
        <button class="header__burger burger">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </div>
  </div>
</header>
<aside class="aside">
  <div class="aside__body">
    <ul class="aside__list">
      <li class="aside__item">
        <a href="{% url "main:favourite" %}" class="aside__link _icon-bookmark">Избранное</a>
      </li>
      <li class="aside__item">
        <a href ='{% url "main:fridge" %}' class="aside__link _icon-forkandspoon"
          >Ингредиенты</a
        >
      </li>
      <li class="aside__item">
        <a href="{% url "main:filter" 'breakfast' %}" class="aside__link _icon-brightness"
          >Завтраки</a
        >
      </li>
      <li class="aside__item">
        <a href="{% url "main:filter" 'lunch' %}" class="aside__link _icon-cloud1">Обеды</a>
      </li>
      <li class="aside__item">
        <a href="{% url "main:filter" 'dinner' %}" class="aside__link _icon-moon">Ужины</a>
      </li>
    </ul>
    <a href="{% url "logout"  %}" class="aside__button _icon-in-alt"> Выйти </a>
    <!-- Или выйти -->
    <!-- <a href="#" class="aside__button _icon-exit"> Выйти </a> -->
  </div>
</aside>

      <main class="page">
        <div class="page__container _container">
          <section class="page__recipes recipes py-5">
            <aside class="filter">
  <div class="filter__body">
    <h1 class="filter__title _icon-filter">Фильтрация</h1>
    <div class="filter__content">
      <form action="#" method="get" class="filter__form form-filter">
        <div class="form-filter__body">
          <div class="form-filter__items">
            <div class="form-filter__item _toggled-input">
              <label class="label"
                >Минимальное кол-во кaлорий:<span>*</span></label
              >
              <input
                name="min_col"
                type="text"
                class="form-filter__input input"
              />
            </div>
            <div class="form-filter__item _toggled-input">
              <label class="label"
                >Минимальное кол-во кaлорий:<span>*</span></label
              >
              <input
                name="max_col"
                type="text"
                class="form-filter__input input"
              />
            </div>
          </div>
          {% for i in products %}
          <div class="form-filter__item checkbox">
            <span class="checkbox__icon checkbox__icon"></span>
            <label class="form-filter__label checkbox__label">{{i.product.name_product}}</label>
            <input type="checkbox" class="form-filter__input checkbox__input" />
          </div>

          {% endfor %}

        </div>
        <a
          href="{% url "main:generic_recept" true=true cal=cal which_time=time %}"
          disabled
          class="form-filter__button btn btn-green mb-2 text-center generate"
          type="submit"
        >
          Сгенерировать рецепты
        </a>
        <button class="form-filter__button btn btn-dark" type="submit">
          Отфильтровать
        </button>
      </form>
    </div>
  </div>
</aside>
{% if ai %}
            <div class="recipes__body">
              <h1 class="recipes__title title">
                Рецепты {{time}}ов от исскуственного интеллекта
              </h1>
              <div class="recipes__columns">

  {% for i in ai %}
  <div class="recipes__column column _anim-items _anim-no-hide recipes__column_full">
    <div class="recipes__item item-recipes">

      <div class="item-recipes__block ">
        <div class="item-recipes__header">
          <h2 class="item-recipes__title mini-title _icon-forkandspoon">Салат</h2>
          <a
            href="{% url "main:train" i.calories %}"
            title="Как сжечь каллории этого блюда?"
            class="item-recipes__tippy _icon-question"
          >
          </a>
        </div>

        <div class="item-recipes__items">
          <ul class="item-recipes__list" data-spollers>

            <li class="item-recipes__item">
              <div class="item-recipes__spoller-block">
                <div class="item-recipes__spoller _icon-arrow-down" data-spoller>
                  Ингредиенты
                </div>
                <ul class="item-recipes__list">
                  {% for i2 in i.ingridents %}
                    <li class="item-recipes__item">
                      <div class="item-recipes__key">{{i2}}</div>
                      
                    </li>
                    {% endfor %}

                </ul>
              </div>
            </li>
            <li class="item-recipes__item">
              <div class="item-recipes__key">Подаётся</div>
              <div class="item-recipes__value">С любовью</div>
            </li>
          </ul>
        </div>

        <div class="item-recipes__text">
          {{i.script}}
        </div>
        <div class="item-recipes__footer">
          <div class="item-recipes__links">
        
              <!-- Если рецепт в избранном то добавлять класс _active -->
              <a href="{% url "main:delete_ai" i.id %}" class="item-recipes__link item-recipes__link_red">
                Удалить
                </a>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}


  {% endif %}

<div class="recipes__body">
  <h1 class="recipes__title title">
    Рецепты {{time}}ов
  </h1>

<div class="recipes__columns flex flex-col gap-5">
    {% for i in recepts %}
<div class="recipes__column column _anim-items _anim-no-hide">
  <div class="recipes__item item-recipes">
  <div class="item-recipes__block">
  <div class="item-recipes__body">
  <div class="item-recipes__image">
  <picture><source srcset="{{i.img.url}}" type="image/webp"><img src="{{i.img.url}}" alt="image" /></picture>
  </div>
  </div>
  </div>
  <div class="item-recipes__block">
  <div class="item-recipes__header">
  <h2 class="item-recipes__title mini-title _icon-forkandspoon">{{i.name}}</h2>
  <a
  href="{% url "main:train" i.calories %}"
  title="Как сжечь каллории этого блюда?"
  class="item-recipes__tippy _icon-question"
  >
  </a>
  </div>

  <div class="item-recipes__items">
  <ul class="item-recipes__list" data-spollers>
  <li class="item-recipes__item">
  <div class="item-recipes__key">Время приготовления</div>
  <div class="item-recipes__value">{{i.Time_to_create}} {{i.which_time}}</div>
  </li>
  <li class="item-recipes__item">
    <div class="item-recipes__key">Каллорийность блюда</div>
    <div class="item-recipes__value">{{i.calories}} калорий </div>
  </li>
  <li class="item-recipes__item">
  <div class="item-recipes__spoller-block">
    <div class="item-recipes__spoller _icon-arrow-down" data-spoller>
      Ингредиенты
    </div>
    <ul class="item-recipes__list">
      {% for i2 in i.products.all %}
      <li class="item-recipes__item">
        <div class="item-recipes__key">{{i2.product.name_product}} </div>
        <div class="item-recipes__value">{{i2.how_many}} {{i2.product.weight}}</div>
      </li>
      {% endfor %}

    </ul>
  </div>
  </li>
  <li class="item-recipes__item">
  <div class="item-recipes__key">Подаётся</div>
  <div class="item-recipes__value">С любовью</div>
  </li>
  </ul>
  </div>

  <div class="item-recipes__text">
    {{i.script}}
  </div>
  <div class="item-recipes__footer">
  <div class="item-recipes__links">
  <a href="{% url "main:cook" i.id %}" class="item-recipes__link item-recipes__link_red">
  Приготовить
  </a>
  {% if i in izbran %}
  <a  href="{% url "main:delete_f" i.id %}"
  class="item-recipes__link item-recipes__link_favorite _icon-bookmark _active"><span>В избранном</span></a>
  {% else %}
    <a  href="{% url "main:make_f" i.id %}"
    class="item-recipes__link item-recipes__link_favorite _icon-bookmark">В избранное</a>
  {% endif %}



  <!-- Если рецепт в избранном то добавлять класс _active -->
  </a>
  </div>
  </div>
 
  </div>

</div>
{% endfor %}
</div>




              </div>
            </div>
          </section>
        </div>
      </main>
      
    </div>
    <!-- Ссылка для открытия попапа -->
<a href="#" class="open-popup"></a>
<!-- Попап -->
<div class="popup" id="">
  <div class="popup__wrapper">
    <div class="popup__body">
      <a href="#" class="popup__close close-popup"></a>
    </div>
  </div>
</div>
<div class="popup" id="addProduct">
  <div class="popup__wrapper">
    <div class="popup__body">
      <div class="popup__header decor">
        <h2 class="popup__title title">Добавить продукт</h2>
        <a href="#" class="popup__close close-popup _icon-close"></a>
      </div>

      <form
        action="#"
        method="get"
        class="popup__form form-popup popup__form_1"
      >
        <div class="form-popup__body">
          <div class="form-popup__item _toggled-input">
            <label class="label required">
              Название продукта:<span>*</span>
            </label>
            <input
              name="product_name"
              type="text"
              class="form-popup__input input product-name"
            />
          </div>
        </div>
        <div class="form-popup__footer">
          <div class="form-popup__tags">
            <div
              class="form-popup__tag tag form-popup__tag_1 _hidden"
              data-add-to-url="onClick,current,product_name"
            >
              Яйцо
            </div>
            <div
              class="form-popup__tag tag form-popup__tag_2 _hidden"
              data-add-to-url="onClick,current,product_name"
            >
              Молоко
            </div>
            <div
              class="form-popup__tag tag form-popup__tag_3 _hidden"
              data-add-to-url="onClick,current,product_name"
            >
              Яйца нос
            </div>
          </div>
        </div>
        <a
          href="#createNewProduct"
          class="form-popup__new _hidden open-popup btn btn-outline-green btn-outline open-popup"
          >Создать свой продукт</a
        >
      </form>

      <form
        style="display: none"
        action="#"
        method="post"
        class="popup__form form-popup popup__form_2"
      >
        <div class="form-popup__body">
          <div class="form-popup__item _toggled-input">
            <label class="label required">
              Количество продукта(шт):<span>*</span>
            </label>
            <input
              name="product_quantity"
              type="text"
              class="form-popup__input input"
            />
          </div>
        </div>
        <button class="form-popup__button btn btn-dark" type="submit">
          Сохранить количество продукта
        </button>
      </form>
    </div>
  </div>
</div>
<div class="popup" id="createNewProduct">
  <div class="popup__wrapper">
    <div class="popup__body">
      <div class="popup__header decor">
        <h2 class="popup__title title">Создать продукт</h2>
        <a href="#" class="popup__close close-popup _icon-close"></a>
      </div>

      <form action="#" method="get" class="popup__form form-popup">
        <div class="form-popup__body">
          <div class="form-popup__item _toggled-input">
            <label class="label required">
              Название продукта:<span>*</span>
            </label>
            <input
              name="new_product_name"
              type="text"
              class="form-popup__input input"
            />
          </div>
          <div class="form-popup__item _toggled-input">
            <label class="label required">
              Количество продукта(шт):<span>*</span>
            </label>
            <input
              name="new_product_quantity"
              type="number"
              class="form-popup__input input"
            />
          </div>
        </div>

        <button
          type="submit"
          class="form-popup__button open-popup btn btn-outline-green btn-outline"
        >
          Создать продукт
        </button>
      </form>
    </div>
  </div>
</div>

<div class="popup" id="changeProductQuantity">
  <div class="popup__wrapper">
    <div class="popup__body">
      <div class="popup__header decor">
        <h2 class="popup__title title">Изменить кол-во продукта</h2>
        <a href="#" class="popup__close close-popup _icon-close"></a>
      </div>

      <form action="#" method="get" class="popup__form form-popup">
        <div class="form-popup__body">
          <div class="form-popup__item _toggled-input">
            <label class="label required">
              Количество продукта:<span>*</span>
            </label>
            <input
              name="product_quantity"
              type="number"
              class="form-popup__input input"
            />
          </div>
        </div>
        <button class="form-popup__button btn btn-dark" type="submit">
          Изменить количество
        </button>
      </form>
    </div>
  </div>
</div>
 <script src="https://cdn.tailwindcss.com%22%3E/?_v=20231022062914"></script>
<script src="{% static 'mainapp/js/app.min.js' %}"></script>

  </body>
</html>
